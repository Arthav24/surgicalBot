<?xml version="1.0"?>
<sdf version="1.7">
    <model name="EB100">
        <!-- Fix To World -->
        <joint name="ground_plane" type="fixed">
            <parent>world</parent>
            <child>base_link</child>
        </joint>
        <!-- Arm Links -->
        <link name="base_link">
            <visual name="base_link_visual">
                <geometry>
                    <mesh>
                        <uri>base_link/base_link.STL</uri>
                    </mesh>
                </geometry>
                <material>
                    <diffuse>1.0 1.0 1.0</diffuse>
                    <specular>1.0 1.0 1.0</specular>
                </material>
            </visual>
            <collision name="base_link_collision">
                <geometry>
                    <mesh>
                        <uri>base_link/base_link.STL</uri>
                    </mesh>
                </geometry>
                <surface>
                    <friction>
                        <ode>
                            <mu>1.05</mu>
                            <mu2>1.05</mu2>
                        </ode>
                    </friction>
                </surface>
            </collision>
            <inertial>
                <pose>-1.33024218671373E-07 5.42254364069815E-07 0.0149456241765188 0 0 0</pose>
                <mass>2.814271300104062</mass>
                <inertia>
                    <ixx>0.0075390636364814695</ixx>
                    <iyy>0.010508017427382959</iyy>
                    <izz>0.009864933638708275</izz>
                    <ixy>-1.5053124574783335e-05</ixy>
                    <ixz>-0.0012144328835738973</ixz>
                    <iyz>1.0434803501032979e-05</iyz>
                </inertia>
            </inertial>
        </link>
        <link name="link1">
            <pose relative_to="joint1">0 0 0 0 0 0</pose>
            <visual name="link1_visual">
                <geometry>
                    <mesh>
                        <uri>link_1/link1.STL</uri>
                    </mesh>
                </geometry>
                <material>
                    <diffuse>1.0 1.0 1.0</diffuse>
                    <specular>1.0 1.0 1.0</specular>
                </material>
            </visual>
            <collision name="link1_collision">
                <geometry>
                    <mesh>
                        <uri>link_1/link1.STL</uri>
                    </mesh>
                </geometry>
                <surface>
                    <friction>
                        <ode>
                            <mu>1.05</mu>
                            <mu2>1.05</mu2>
                        </ode>
                    </friction>
                </surface>
            </collision>
            <inertial>
                <pose>-3.49038868342818E-05 -0.00648920194363665 0.00701216463523289 0 0 0</pose>
                <mass>2.6433170427227215</mass>
                <inertia>
                    <ixx>0.017405076982879724</ixx>
                    <iyy>0.015352077935781732</iyy>
                    <izz>0.005987891663073857</izz>
                    <ixy>-8.687986369621078e-09</ixy>
                    <ixz>-1.6277819062920423e-08</ixz>
                    <iyz>0.004510855959102245</iyz>
                </inertia>
            </inertial>
        </link>
        <link name="link2">
            <pose relative_to="joint2">0 0 0 0 0 0</pose>
            <visual name="link2_visual">
                <geometry>
                    <mesh>
                        <uri>link_2/link2.STL</uri>
                    </mesh>
                </geometry>
                <material>
                    <diffuse>1.0 1.0 1.0</diffuse>
                    <specular>1.0 1.0 1.0</specular>
                </material>
            </visual>
            <collision name="link2_collision">
                <geometry>
                    <mesh>
                        <uri>link_2/link2.STL</uri>
                    </mesh>
                </geometry>
                <surface>
                    <friction>
                        <ode>
                            <mu>1.05</mu>
                            <mu2>1.05</mu2>
                        </ode>
                    </friction>
                </surface>
            </collision>
            <inertial>
                <pose>5.25111081205538E-05 0.11715485741318 -0.00391005557091638 0 0 0</pose>
                <mass>2.6652755331661186</mass>
                <inertia>
                    <ixx>0.01778694005635383</ixx>
                    <iyy>0.006044133867952844</iyy>
                    <izz>0.01571095500455695</izz>
                    <ixy>8.70635625879119e-08</ixy>
                    <ixz>3.752072058394008e-08</ixz>
                    <iyz>-0.004599490295490376</iyz>
                </inertia>
            </inertial>
        </link>
        <link name="link3">
            <pose relative_to="joint3">0 0 0 0 0 0</pose>
            <visual name="link3_visual">
                <geometry>
                    <mesh>
                        <uri>link_3/link3.STL</uri>
                    </mesh>
                </geometry>
                <material>
                    <diffuse>1.0 1.0 1.0</diffuse>
                    <specular>1.0 1.0 1.0</specular>
                </material>
            </visual>
            <collision name="link3_collision">
                <geometry>
                    <mesh>
                        <uri>link_3/link3.STL</uri>
                    </mesh>
                </geometry>
                <surface>
                    <friction>
                        <ode>
                            <mu>1.05</mu>
                            <mu2>1.05</mu2>
                        </ode>
                    </friction>
                </surface>
            </collision>
            <inertial>
                <pose>-3.34027587025817E-06 0.108727898112191 0.000786655462555005 0 0 0</pose>
                <mass>2.3293714829045733</mass>
                <inertia>
                    <ixx>0.0075496764161139766</ixx>
                    <iyy>0.009680676080191398</iyy>
                    <izz>0.007944557422008086</izz>
                    <ixy>-0.0024320464513492225</ixy>
                    <ixz>-0.003250815048103007</ixz>
                    <iyz>-0.0021316282421730694</iyz>
                </inertia>
            </inertial>
        </link>
        <link name="link4">
            <pose relative_to="joint4">0 0 0 0 0 0</pose>
            <visual name="link4_visual">
                <geometry>
                    <mesh>
                        <uri>link_4/link4.STL</uri>
                    </mesh>
                </geometry>
                <material>
                    <diffuse>1.0 1.0 1.0</diffuse>
                    <specular>1.0 1.0 1.0</specular>
                </material>
            </visual>
            <collision name="link4_collision">
                <geometry>
                    <mesh>
                        <uri>link_4/link4.STL</uri>
                    </mesh>
                </geometry>
                <surface>
                    <friction>
                        <ode>
                            <mu>1.05</mu>
                            <mu2>1.05</mu2>
                        </ode>
                    </friction>
                </surface>
            </collision>
            <inertial>
                <pose>-1.44468152066875E-05 0.00662054639180243 0.0677858766519277 0 0 0</pose>
                <mass>2.3104763646281508</mass>
                <inertia>
                    <ixx>0.007764568814864828</ixx>
                    <iyy>0.008015776929980149</iyy>
                    <izz>0.009955882308071066</izz>
                    <ixy>0.003371475204045935</ixy>
                    <ixz>-0.002343621113168248</ixz>
                    <iyz>0.0022917526161470624</iyz>
                </inertia>
            </inertial>
        </link>
        <link name="link5">
            <pose relative_to="joint5">0 0 0 0 0 0</pose>
            <visual name="link5_visual">
                <geometry>
                    <mesh>
                        <uri>link_5/link5.STL</uri>
                    </mesh>
                </geometry>
                <material>
                    <diffuse>1.0 1.0 1.0</diffuse>
                    <specular>1.0 1.0 1.0</specular>
                </material>
            </visual>
            <collision name="link5_collision">
                <geometry>
                    <mesh>
                        <uri>link_5/link5.STL</uri>
                    </mesh>
                </geometry>
                <surface>
                    <friction>
                        <ode>
                            <mu>1.05</mu>
                            <mu2>1.05</mu2>
                        </ode>
                    </friction>
                </surface>
            </collision>
            <inertial>
                <pose>1.588131219553E-05 0.0677856742896595 0.00662015510693871 0 0 0</pose>
                <mass>2.6226426154892004</mass>
                <inertia>
                    <ixx>0.029070538014399377</ixx>
                    <iyy>0.027638529986528795</iyy>
                    <izz>0.004251111234400737</izz>
                    <ixy>6.208738268725568e-07</ixy>
                    <ixz>-1.0059151925023392e-05</ixz>
                    <iyz>-0.007424306477850814</iyz>
                </inertia>
            </inertial>
        </link>
        <link name="link6">
            <pose relative_to="joint6">0 0 0 0 0 0</pose>
            <visual name="link6_visual">
                <geometry>
                    <mesh>
                        <uri>link_6/link6.STL</uri>
                    </mesh>
                </geometry>
                <material>
                    <diffuse>1.0 1.0 1.0</diffuse>
                    <specular>1.0 1.0 1.0</specular>
                </material>
            </visual>
            <collision name="link6_collision">
                <geometry>
                    <mesh>
                        <uri>link_6/link6.STL</uri>
                    </mesh>
                </geometry>
                <surface>
                    <friction>
                        <ode>
                            <mu>1.05</mu>
                            <mu2>1.05</mu2>
                        </ode>
                    </friction>
                </surface>
            </collision>
            <inertial>
                <pose>-4.85506410887449E-05 -0.000772066948343975 0.0864369192980011 0 0 0</pose>
                <mass>1.5025804886626795</mass>
                <inertia>
                    <ixx>0.002940555801469018</ixx>
                    <iyy>0.00392105201248677</iyy>
                    <izz>0.0054115603870960195</izz>
                    <ixy>-0.00042391108351381507</ixy>
                    <ixz>0.000610007735338717</ixz>
                    <iyz>0.00012647545430836214</iyz>
                </inertia>
            </inertial>
        </link>

        <!-- ================================================== -->
        <!-- Gripper Finger Links -->
        <link name="gripper_left_link">
            <pose relative_to="gripper_left_joint">0 0 0 0 0 0</pose>
            <visual name="gripper_left_visual">
                <geometry>
                    <mesh>
                        <uri>gripper_left_link/gripper_left_link.STL</uri>
                    </mesh>
                </geometry>
                <material>
                    <diffuse>1.0 1.0 1.0</diffuse>
                    <specular>1.0 1.0 1.0</specular>
                </material>
            </visual>
            <collision name="gripper_left_collision">
                <geometry>
                    <mesh>
                        <uri>gripper_left_link/gripper_left_link.STL</uri>
                    </mesh>
                </geometry>
                <surface>
                    <friction>
                        <ode>
                            <mu>2.15</mu>
                            <mu2>2.15</mu2>
                        </ode>
                    </friction>
                </surface>
            </collision>
            <inertial>
                <pose>-0.230028099250672 0.048706949092005 0.296932678246992 0 0 0</pose>
                <mass>0.02238453537819424</mass>
                <inertia>
                    <ixx>6.74804167363695e-05</ixx>
                    <iyy>6.627189221641395e-05</iyy>
                    <izz>1.550396267804825e-05</izz>
                    <ixy>-4.1027443646025676e-09</ixy>
                    <ixz>1.8693673970152995e-08</ixz>
                    <iyz>1.1967548474390802e-05</iyz>
                </inertia>
            </inertial>
        </link>
        <link name="gripper_right_link">
            <pose relative_to="gripper_right_joint">0 0 0 0 0 0</pose>
            <visual name="gripper_right_visual">
                <geometry>
                    <mesh>
                        <uri>gripper_right_link/gripper_right_link.STL</uri>
                    </mesh>
                </geometry>
                <material>
                    <diffuse>1.0 1.0 1.0</diffuse>
                    <specular>1.0 1.0 1.0</specular>
                </material>
            </visual>
            <collision name="gripper_right_collision">
                <geometry>
                    <mesh>
                        <uri>gripper_right_link/gripper_right_link.STL</uri>
                    </mesh>
                </geometry>
                <surface>
                    <friction>
                        <ode>
                            <mu>2.15</mu>
                            <mu2>2.15</mu2>
                        </ode>
                    </friction>
                </surface>
            </collision>
            <inertial>
                <pose>0.279241572361513 0.0486859261203842 -0.281739991890775 0 0 0</pose>
                <mass>0.02238453537819424</mass>
                <inertia>
                    <ixx>6.74804167363695e-05</ixx>
                    <iyy>6.627189221641395e-05</iyy>
                    <izz>1.550396267804825e-05</izz>
                    <ixy>-4.1027443646025676e-09</ixy>
                    <ixz>1.8693673970152995e-08</ixz>
                    <iyz>1.1967548474390802e-05</iyz>
                </inertia>
            </inertial>
        </link>
        <link name="camera_link">
            <pose relative_to="camera_joint">0 0 0 0 -1.5708 0</pose>
            <visual name="camera_link_visual">
                <geometry>
                    <mesh>
                        <uri>camera_link/camera.stl</uri>
                        <scale>0.001 0.001 0.001</scale>
                    </mesh>
                </geometry>
                <material>
                    <diffuse>1.0 1.0 1.0</diffuse>
                    <specular>1.0 1.0 1.0</specular>
                </material>
            </visual>
            <collision name="camera_link_collision">
                <geometry>
                    <mesh>
                        <uri>camera_link/camera.stl</uri>
                        <scale>0.001 0.001 0.001</scale>
                    </mesh>
                </geometry>
                <surface>
                    <friction>
                        <ode>
                            <mu>1.05</mu>
                            <mu2>1.05</mu2>
                        </ode>
                    </friction>
                </surface>
            </collision>
            <inertial>
                <pose>-0.011644453579349 -0.000127541365236405 -0.0168801747695049 0 0 0</pose>
                <mass>0.000078</mass>
                <inertia>
                    <ixx>1.4393E-05</ixx>
                    <ixy>1.0273E-08</ixy>
                    <ixz>-7.719E-10</ixz>
                    <iyy>4.4785E-06</iyy>
                    <iyz>4.6621E-09</iyz>
                    <izz>1.2723E-05</izz>
                </inertia>
            </inertial>
            <sensor name="camera" type="camera">
                <camera>
                    <horizontal_fov>1.919</horizontal_fov>
                    <image>
                        <width>640</width>
                        <height>480</height>
                        <format>R8G8B8</format>
                    </image>
                    <clip>
                        <near>0.1</near>
                        <far>100</far>
                    </clip>
                </camera>
                <always_on>1</always_on>
                <update_rate>30</update_rate>
                <visualize>true</visualize>
                <topic>camera/image</topic> <!-- Updated topic name for clarity -->
            </sensor>
            <plugin filename="ignition-gazebo-camera-system" name="ignition::gazebo::systems::Camera">
                <camera>
                    <image>
                        <width>640</width>
                        <height>480</height>
                        <format>R8G8B8</format>
                    </image>
                    <update_rate>30</update_rate>
                </camera>
            </plugin>
        </link>

        <!-- ================================================== -->
        <!-- Arm Joints -->
        <joint name="joint1" type="revolute">
            <pose relative_to="base_link">0.00017721 -0.00015518 0.076035 -1.5708 0 0</pose>
            <parent>base_link</parent>
            <child>link1</child>
            <axis>
                <xyz>0 -1 0</xyz>
                <limit>
                    <effort>87</effort>
                    <lower>-3.1415926535897932384626433832795</lower>
                    <upper>3.1415926535897932384626433832795</upper>
                    <velocity>2.617993877991494</velocity>
                </limit>
                <dynamics>
                    <spring_reference>0</spring_reference>
                    <spring_stiffness>0</spring_stiffness>
                    <damping>21.75</damping>
                    <friction>3.48</friction>
                </dynamics>
            </axis>
        </joint>
        <joint name="joint2" type="revolute">
            <pose relative_to="link1">0 0 0.0911 3.1416 0 0</pose>
            <parent>link1</parent>
            <child>link2</child>
            <axis>
                <xyz>0 0 -1</xyz>
                <limit>
                    <effort>87</effort>
                    <lower>-3.1415926535897932384626433832795</lower>
                    <upper>3.1415926535897932384626433832795</upper>
                    <velocity>2.617993877991494</velocity>
                </limit>
                <dynamics>
                    <spring_reference>0</spring_reference>
                    <spring_stiffness>0</spring_stiffness>
                    <damping>21.75</damping>
                    <friction>3.48</friction>
                </dynamics>
            </axis>
        </joint>
        <joint name="joint3" type="revolute">
            <pose relative_to="link2">0.0002 0.23547 0.083104 0 0 0</pose>
            <parent>link2</parent>
            <child>link3</child>
            <axis>
                <xyz>0 0 -1</xyz>
                <limit>
                    <effort>87</effort>
                    <lower>-3.1415926535897932384626433832795</lower>
                    <upper>3.1415926535897932384626433832795</upper>
                    <velocity>2.617993877991494</velocity>
                </limit>
                <dynamics>
                    <spring_reference>0</spring_reference>
                    <spring_stiffness>0</spring_stiffness>
                    <damping>21.75</damping>
                    <friction>3.48</friction>
                </dynamics>
            </axis>
        </joint>
        <joint name="joint4" type="revolute">
            <pose relative_to="link3">0 0.2290554354712 0 -3.1416 0 0</pose>
            <parent>link3</parent>
            <child>link4</child>
            <axis>
                <xyz>0 0 -1</xyz>
                <limit>
                    <effort>87</effort>
                    <lower>-3.1415926535897932384626433832795</lower>
                    <upper>3.1415926535897932384626433832795</upper>
                    <velocity>2.617993877991494</velocity>
                </limit>
                <dynamics>
                    <spring_reference>0</spring_reference>
                    <spring_stiffness>0</spring_stiffness>
                    <damping>21.75</damping>
                    <friction>3.48</friction>
                </dynamics>
            </axis>
        </joint>
        <joint name="joint5" type="revolute">
            <pose relative_to="link4">0 0 0.0769999999999998 3.1416 0 0</pose>
            <parent>link4</parent>
            <child>link5</child>
            <axis>
                <xyz>0 -1 0</xyz>
                <limit>
                    <effort>12</effort>
                    <lower>-3.1415926535897932384626433832795</lower>
                    <upper>3.1415926535897932384626433832795</upper>
                    <velocity>3.1415926535897932384626433832795</velocity>
                </limit>
                <dynamics>
                    <spring_reference>0</spring_reference>
                    <spring_stiffness>0</spring_stiffness>
                    <damping>3.0</damping>
                    <friction>0.48</friction>
                </dynamics>
            </axis>
        </joint>
        <joint name="joint6" type="revolute">
            <pose relative_to="link5">0 0.077 0 -3.1416 0 0</pose>
            <parent>link5</parent>
            <child>link6</child>
            <axis>
                <xyz>0 0 -1</xyz>
                <limit>
                    <effort>12</effort>
                    <lower>-3.1415926535897932384626433832795</lower>
                    <upper>3.1415926535897932384626433832795</upper>
                    <velocity>3.1415926535897932384626433832795</velocity>
                </limit>
                <dynamics>
                    <spring_reference>0</spring_reference>
                    <spring_stiffness>0</spring_stiffness>
                    <damping>3.0</damping>
                    <friction>0.48</friction>
                </dynamics>
            </axis>
        </joint>

        <!-- ================================================== -->
        <!-- Finger Joints -->
        <joint name="gripper_left_joint" type="prismatic">
            <pose relative_to="link6">-0.291197990250782 0.255084835806096 0.0865221108762051 1.57079632679489 0 1.57079632679489</pose>
            <parent>link6</parent>
            <child>gripper_left_link</child>
            <axis>
                <xyz>1 0 0</xyz>
                <limit>
                    <effort>20</effort>
                    <lower>-0.04</lower>
                    <upper>0</upper>
                    <velocity>0.2</velocity>
                </limit>
                <dynamics>
                    <spring_reference>0</spring_reference>
                    <spring_stiffness>0</spring_stiffness>
                    <damping>10</damping>
                    <friction>0.5</friction>
                </dynamics>
            </axis>
        </joint>
        <joint name="gripper_right_joint" type="prismatic">
            <pose relative_to="link6">-0.287864518042259 0.254184835806095 0.086722110876205 1.5707963267949 0 -1.5707963267949</pose>
            <parent>link6</parent>
            <child>gripper_right_link</child>
            <axis>
                <xyz>-1 0 0</xyz>
                <limit>
                    <effort>20</effort>
                    <lower>0.0</lower>
                    <upper>0.04</upper>
                    <velocity>0.2</velocity>
                </limit>
                <dynamics>
                    <spring_reference>0</spring_reference>
                    <spring_stiffness>0</spring_stiffness>
                    <damping>10</damping>
                    <friction>0.5</friction>
                </dynamics>
            </axis>
        </joint>
        <joint name="camera_joint" type="fixed">
            <pose relative_to="link6">0.0600999999999985 -0.000500000224238906 0.127499999999999 0 0 0</pose>
            <parent>link6</parent>
            <child>camera_link</child>
        </joint>
        
        <!-- Joint controller plugins -->
        <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
            <joint_name>joint1</joint_name>
            <p_gain>50</p_gain>
            <d_gain>20</d_gain>
            <i_gain>0</i_gain>
            <i_min>-1</i_min>
            <i_max>1</i_max>
            <cmd_min>-87</cmd_min>
            <cmd_max>87</cmd_max>
            <topic>/joint_angles/joint1</topic>
        </plugin>
        <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
            <joint_name>joint2</joint_name>
            <p_gain>10000</p_gain>
            <i_gain>0</i_gain>
            <d_gain>500</d_gain>
            <i_max>1</i_max>
            <i_min>-1</i_min>
            <cmd_max>87</cmd_max>
            <cmd_min>-87</cmd_min>
            <topic>/joint_angles/joint2</topic>
        </plugin>
        <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
            <joint_name>joint3</joint_name>
            <p_gain>100</p_gain>
            <i_gain>0</i_gain>
            <d_gain>10</d_gain>
            <i_max>1</i_max>
            <i_min>-1</i_min>
            <cmd_max>87</cmd_max>
            <cmd_min>-87</cmd_min>
            <topic>/joint_angles/joint3</topic>
        </plugin>
        <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
            <joint_name>joint4</joint_name>
            <p_gain>1000</p_gain>
            <i_gain>0</i_gain>
            <d_gain>50</d_gain>
            <i_max>1</i_max>
            <i_min>-1</i_min>
            <cmd_max>87</cmd_max>
            <cmd_min>-87</cmd_min>
            <topic>/joint_angles/joint4</topic>
        </plugin>
        <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
            <joint_name>joint5</joint_name>
            <p_gain>100</p_gain>
            <i_gain>0</i_gain>
            <d_gain>50</d_gain>
            <i_max>1</i_max>
            <i_min>-1</i_min>
            <cmd_max>12</cmd_max>
            <cmd_min>-12</cmd_min>
            <topic>/joint_angles/joint5</topic>
        </plugin>
        <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
            <joint_name>joint6</joint_name>
            <p_gain>100</p_gain>
            <i_gain>0</i_gain>
            <d_gain>10</d_gain>
            <i_max>1</i_max>
            <i_min>-1</i_min>
            <cmd_max>12</cmd_max>
            <cmd_min>-12</cmd_min>
            <topic>/joint_angles/joint6</topic>
        </plugin>
        <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
            <joint_name>gripper_left_joint</joint_name>
            <p_gain>100</p_gain>
            <d_gain>50</d_gain>
            <i_gain>0</i_gain>
            <i_min>-1</i_min>
            <i_max>1</i_max>
            <cmd_min>-20</cmd_min>
            <cmd_max>20</cmd_max>
            <topic>/joint_angles/gripper_left_joint</topic>
        </plugin>
        <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
            <joint_name>gripper_right_joint</joint_name>
            <p_gain>100</p_gain>
            <d_gain>50</d_gain>
            <i_gain>0</i_gain>
            <i_min>-1</i_min>
            <i_max>1</i_max>
            <cmd_min>-20</cmd_min>
            <cmd_max>20</cmd_max>
            <topic>/joint_angles/gripper_right_joint</topic>
        </plugin>
    </model>
</sdf>
